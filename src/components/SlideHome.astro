---
// SlideHome.astro - Migración del componente Vue a Astro
import Carousel from './Carousel.astro';

const images = [
  "/iconografia/Recurso41.png",
  "/iconografia/Recurso42.png",
  "/iconografia/Recurso43.png",
  "/iconografia/Recurso44.png",
];

const slides = [
  {
    title: "Cuidamos lo que más valoras, ",
    subtitle: "protegemos lo que importa",
    description:
      "En Aluxez Administración, gestionamos cada residencial con el mismo compromiso con el que los aluxes cuidan la tierra, creando espacios de armonía, confianza y bienestar.",
  },
  {
    title: "El estandar en administración residencial,",
    subtitle: "Comienza aquí",
    description: "Seguridad, orden y transparencia para tu tranquilidad.",
  },
  {
    title: "Proteger tu hogar ",
    subtitle: "es nuestra tradición",
    description:
      "Garantizamos una administración residencial eficiente, honesta y con altos estándares de calidad.",
  },
  {
    title: "Tu residencial ",
    subtitle: "nuestra prioridad",
    description:
      "Descubre cómo nuestra experiencia y transparencia elevan la gestión de tu comunidad.",
  },
  {
    title: "Más que administración ",
    subtitle: "cuidamos de tu comunidad",
    description:
      "Cada detalle cuenta. En Aluxez, ofrecemos atención personalizada para garantizar la mejor experiencia en tu residencial.",
  },
];
---

<style>
  @keyframes floating {
    0% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
  }
  .animate-floating {
    animation: floating 5s ease-in-out infinite;
  }
  
  /* Ocultar elementos de debugging que puedan aparecer */
  [data-debug], .debug-info, .dev-tools {
    display: none !important;
  }

  @media (min-width: 1280px) {
    .container {
      display: flex;
      align-items: center;
      min-height: 70vh;
      padding-top: 0;
      margin-top: -50px;
    }
  }
</style>

<div class="container m-auto px-4 sm:px-6 lg:px-10 w-full h-full flex flex-wrap items-start xl:items-center justify-center relative z-10 pt-8 md:pt-12 lg:pt-0">
  <div class="relative w-full xl:w-1/2 px-2 sm:px-4 lg:px-0 mt-6 sm:mt-8 md:mt-10 lg:-mt-32 xl:mt-0 flex flex-col items-center xl:items-start">
    {slides.map((slide, index) => (
      <div
        class={`w-full absolute transition-opacity duration-1000 ease-in-out slide-content ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
        data-slide-index={index}
      >
  <h1 class="text-3xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl text-wrap font-bold text-secondary-light leading-tight mb-3 md:mb-4 text-center xl:text-left max-w-xs sm:max-w-lg md:max-w-2xl mx-auto xl:mx-0">
          {slide.title}
          <span class="text-secondary">{slide.subtitle}</span>
        </h1>
        <p class="mt-3 md:mt-4 text-sm sm:text-base md:text-lg lg:text-lg text-center xl:text-left text-secondary-light max-w-xs sm:max-w-lg md:max-w-2xl mx-auto xl:mx-0 mb-20 sm:mb-24 md:mb-28 lg:mb-0">
          {slide.description}
        </p>
      </div>
    ))}
  </div>

  <!-- Iconos flotantes - solo visibles en desktop extra grande (1280px+) -->
  <div class="w-full lg:w-1/2 justify-center items-center lg:flex-row-reverse hidden xl:flex lg:-mt-32 xl:mt-0">
    <div class="w-full max-w-md lg:max-w-full grid grid-flow-col grid-rows-2 grid-cols-3 gap-4 lg:gap-8">
      <div class="transform scale-75 -rotate-6 translate-x-20">
        <img src="/iconografia/Recurso39.png" alt="" class="animate-floating" />
      </div>
      <div class="col-start-3 transform scale-75 rotate-6 translate-x-2 translate-y-15">
        <img src="/iconografia/Recurso44.png" alt="" class="animate-floating" />
      </div>
      <div class="transform -scale-75 translate-y-11">
        <img src="/iconografia/Recurso41.png" alt="" class="animate-floating" />
      </div>
      <div class="transform translate-y-24">
        <img src="/iconografia/Recurso43.png" alt="" class="animate-floating" />
      </div>
      <div class="row-start-1 col-start-2 col-span-2 transform translate-x-20 translate-y-4">
        <img src="/iconografia/Recurso42.png" alt="" class="animate-floating" />
      </div>
    </div>
  </div>

  <!-- Carrusel centrado verticalmente en la mitad derecha en tablets -->
  <div class="w-full lg:w-1/2 flex items-center justify-center mt-28 md:mt-36 lg:mt-0 lg:hidden">
    <Carousel items={images} />
  </div>
</div>

<script>
  // JavaScript para manejar el slideshow
  interface SlideElements {
    slides: NodeListOf<Element>;
  }

  class SlideHome {
    private elements: SlideElements;
    private currentIndex: number = 0;
    private totalSlides: number;
    
    constructor() {
      this.elements = {
        slides: document.querySelectorAll('.slide-content')
      };
      this.totalSlides = this.elements.slides.length;
      
      this.init();
    }
    
    init(): void {
      if (this.totalSlides > 0) {
        this.startAutoSlide();
      }
    }
    
    nextSlide(): void {
      // Ocultar slide actual
      this.elements.slides[this.currentIndex]?.classList.remove('opacity-100');
      this.elements.slides[this.currentIndex]?.classList.add('opacity-0');
      
      // Mover al siguiente slide
      this.currentIndex = (this.currentIndex + 1) % this.totalSlides;
      
      // Mostrar nuevo slide
      this.elements.slides[this.currentIndex]?.classList.remove('opacity-0');
      this.elements.slides[this.currentIndex]?.classList.add('opacity-100');
    }
    
    startAutoSlide(): void {
      setInterval(() => {
        this.nextSlide();
      }, 8000); // Cambia de slide cada 8 segundos
    }
  }

  // Inicializar cuando el DOM esté listo
  document.addEventListener('DOMContentLoaded', () => {
    new SlideHome();
  });
</script>
